<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nederbeek â€” Meldkamer (Politie & Kerst Special)</title>

<style>
/* ============================================
   POLITIE + KERST THEMA
   ============================================ */
:root{
  --bg: #001528;
  --card: rgba(0,30,60,0.85);
  --muted:#c8d9eb;
  --accent:#ffd400;
  --white:#ffffff;

  /* kerst kleuren */
  --xmas-red: #d62828;
  --xmas-green: #5fa65c;
  --xmas-gold: #ffcf63;

  /* politie blauw */
  --police-blue: #0047ab;
}

/* achtergrond met lichte kerst-glow */
body{
  margin:0;
  font-family:Inter,Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top, #012a4a, #000814);
  color:white;
  overflow-x:hidden;
}

/* sneeuw-animatie */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:url('https://i.imgur.com/pxyG7Z8.png');
  opacity:0.15;
  animation: snowfall 18s linear infinite;
}
@keyframes snowfall{
  0%{background-position:0 -1000px;}
  100%{background-position:0 1000px;}
}

/* kerstlichtjes bovenaan */
body::after{
  content:"";
  position:fixed;
  top:0;left:0;
  width:100%;height:50px;
  background:url('https://i.imgur.com/tx8KXGI.png') repeat-x;
  background-size:contain;
  pointer-events:none;
  filter:drop-shadow(0 0 8px var(--xmas-gold));
}

/* --------------------------------------------
   STRUCTUUR
---------------------------------------------*/
.container{max-width:1200px;margin:18px auto;padding:18px}
.header{
  display:flex;justify-content:space-between;align-items:center;gap:12px;
  padding-bottom:12px;
  border-bottom:2px solid rgba(255,255,255,0.1);
  box-shadow:0 6px 20px rgba(0,0,0,0.5);
  background:linear-gradient(90deg,rgba(0,40,70,0.8),rgba(0,10,20,0.7));
  border-radius:12px;
}
.title h1{
  margin:0;font-size:22px;
  text-shadow:0 0 8px var(--police-blue);
}
.title .sub{color:var(--muted);font-size:13px;margin-top:4px}
.controls{display:flex;gap:8px;align-items:center}

/* --------------------------------------------
   KNOPPEN
---------------------------------------------*/
.btn{
  background:var(--accent);
  color:#001b35;
  padding:8px 12px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:700;
  box-shadow:0 0 10px var(--xmas-gold);
  transition:0.2s;
}
.btn:hover{ transform:scale(1.05); }

.btn.ghost{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.2);
  color:white;
  box-shadow:none;
}
.btn.ghost:hover{
  background:rgba(255,255,255,0.12);
}

/* --------------------------------------------
   POLITIE + KERST CARDS
---------------------------------------------*/
.card{
  background:var(--card);
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:0 6px 20px rgba(0,0,0,0.6),
              0 0 15px rgba(0,80,200,0.4);
  backdrop-filter: blur(6px);
}

.grid{
  display:grid;
  grid-template-columns:1fr 380px;
  gap:16px;margin-top:16px
}

@media(max-width:980px){
  .grid{grid-template-columns:1fr}
}

/* --------------------------------------------
   INVOERVELDEN
---------------------------------------------*/
input,select,textarea{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.15);
  background:rgba(255,255,255,0.05);
  color:var(--white);
}

/* --------------------------------------------
   NOODKNOP (kerst + politie sirene)
---------------------------------------------*/
.huge.nood{
  background:linear-gradient(90deg,#d62828,#0047ab,#d62828);
  background-size:300% 100%;
  animation: siren 1s infinite linear;
  border:none;
  color:white;
  font-size:20px;
  padding:16px;
  border-radius:14px;
  box-shadow:0 0 20px red, 0 0 20px blue;
}
@keyframes siren{
  0%{background-position:0%}
  100%{background-position:100%}
}

/* --------------------------------------------
   LIVE OVD LIST
---------------------------------------------*/
.row{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px;border-radius:8px;margin-bottom:8px;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
}

.status-badge{
  min-width:120px;text-align:center;padding:8px;border-radius:8px;
  font-weight:700;
  box-shadow:0 0 10px rgba(255,255,255,0.3);
}

/* --------------------------------------------
   KERSTALARM OVERLAY
---------------------------------------------*/
#alertOverlay{
  position:fixed;inset:0;display:none;
  align-items:center;justify-content:center;
  z-index:99999;
  background:linear-gradient(180deg,rgba(150,0,0,0.95),rgba(90,0,0,0.95));
  color:white;text-align:center;padding:20px;cursor:pointer;
  animation: pulse 1s infinite;
}
@keyframes pulse{
  0%{opacity:1;}50%{opacity:0.3;}100%{opacity:1;}
}

#alertOverlay h2{
  font-size:48px;margin:6px;
  text-shadow:0 0 15px red;
}

/* --------------------------------------------
   TABEL + VTA
---------------------------------------------*/
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.1);}

.thumb{
  width:80px;height:60px;object-fit:cover;border-radius:6px;
  border:1px solid rgba(255,255,255,0.1);
}

/* --------------------------------------------
   KERST FOOTER
---------------------------------------------*/
.footer{
  margin-top:12px;
  color:var(--muted);
  font-size:13px;
  text-align:center;
  padding:12px;
  border-top:1px solid rgba(255,255,255,0.1);
}
</style>
</head>
<body>

<!-- ============================================
     OVZ / INCIDENTEN / FIREBASE / FUNCTIES
============================================ -->

<div class="container">
  <div class="grid">

    <!-- Linkerzijde -->
    <div>
      <div class="card">
        <h2>Nieuw incident</h2>

        <label>Locatie</label>
        <input id="locInput" placeholder="Bijv: Dorpsstraat 12" />

        <label>Type melding</label>
        <select id="typeInput">
          <option>Vekeersongeval</option>
          <option>Vechtpartij</option>
          <option>Brand</option>
          <option>Diefstal</option>
          <option>Overval</option>
          <option>Verdachte situatie</option>
          <option>Huiselijk geweld</option>
          <option>Reanimatie</option>
        </select>

        <label>Omschrijving</label>
        <textarea id="descInput" rows="3"></textarea>

        <label>Afbeelding (optioneel)</label>
        <input id="imgInput" type="file" accept="image/*" />

        <button class="btn" onclick="addIncident()">Toevoegen</button>
      </div>

      <!-- Incidentenlijst -->
      <div class="card" style="margin-top:16px">
        <h2>Alle incidenten</h2>
        <table class="table">
          <thead>
            <tr>
              <th>Tijd</th>
              <th>Locatie</th>
              <th>Type</th>
              <th>Foto</th>
              <th>Actie</th>
            </tr>
          </thead>
          <tbody id="incidentTable"></tbody>
        </table>
      </div>
    </div>

    <!-- Rechterzijde -->
    <div class="card">
      <h2>Huidige officieren (OVD)</h2>
      <div id="ovdList"></div>

      <h3 style="margin-top:20px">Noodknop</h3>
      <button class="btn huge nood" onclick="triggerAlert()">NOODALARM</button>
    </div>

  </div>

  <div class="footer">
    Â© Meldkamer Nederbeek â€¢ Politie x Kerst Editie ðŸŽ„ðŸš”  
  </div>
</div>

<!-- ============================================
     OVERLAY NOODALARM
============================================ -->
<div id="alertOverlay" onclick="hideAlert()">
  <h2>NOODALARM ACTIEF</h2>
  <p>Tik om te sluiten</p>
</div>

<!-- ============================================
     FIREBASE & SCRIPT
============================================ -->

<script type="module">
/* ================================
   Firebase (jouw originele config)
================================ */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getDatabase,
  ref,
  push,
  onValue,
  remove
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "JOUW_API_KEY",
  authDomain: "JOUW_DOMAIN",
  databaseURL: "JOUW_DATABASE_URL",
  projectId: "JOUW_PROJECT_ID",
  storageBucket: "JOUW_BUCKET",
  messagingSenderId: "JOUW_ID",
  appId: "JOUW_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const incRef = ref(db, "incidenten");
const ovdRef = ref(db, "ovd");

/* ================================
   INCIDENT TOEVOEGEN
================================ */
async function addIncident() {
  const loc = document.getElementById("locInput").value;
  const type = document.getElementById("typeInput").value;
  const desc = document.getElementById("descInput").value;
  const file = document.getElementById("imgInput").files[0];

  if (!loc || !type) return alert("Locatie en type verplicht");

  let fotoURL = "";

  if (file) {
    fotoURL = await new Promise((res) => {
      const r = new FileReader();
      r.onload = () => res(r.result);
      r.readAsDataURL(file);
    });
  }

  push(incRef, {
    tijd: new Date().toLocaleTimeString(),
    locatie: loc,
    type: type,
    beschrijving: desc,
    foto: fotoURL
  });

  document.getElementById("locInput").value = "";
  document.getElementById("descInput").value = "";
  document.getElementById("imgInput").value = "";
}

/* ================================
   INCIDENTEN LADEN
================================ */
onValue(incRef, (snap) => {
  const tbody = document.getElementById("incidentTable");
  tbody.innerHTML = "";

  snap.forEach((d) => {
    const id = d.key;
    const x = d.val();

    tbody.innerHTML += `
      <tr>
        <td>${x.tijd}</td>
        <td>${x.locatie}</td>
        <td>${x.type}</td>
        <td>${x.foto ? `<img class="thumb" src="${x.foto}">` : "-"}</td>
        <td><button class="btn ghost" onclick="delIncident('${id}')">Verwijderen</button></td>
      </tr>
    `;
  });
});

/* ================================
   INCIDENT VERWIJDEREN
================================ */
function delIncident(id) {
  remove(ref(db, "incidenten/" + id));
}

/* ================================
   OVD LADEN
================================ */
onValue(ovdRef, (snap) => {
  const box = document.getElementById("ovdList");
  box.innerHTML = "";

  snap.forEach((d) => {
    const o = d.val();
    box.innerHTML += `
      <div class="row">
        <div>
          <strong>${o.naam}</strong><br>
          <small style="color:var(--muted)">${o.eenheid}</small>
        </div>
        <div class="status-badge" style="background:${o.status=='Beschikbaar' ? 'var(--xmas-green)' : 'var(--xmas-red)'}">
          ${o.status}
        </div>
      </div>
    `;
  });
});

/* ================================
   NOODALARM OVERLAY
================================ */
window.triggerAlert = function(){
  document.getElementById("alertOverlay").style.display = "flex";
};

window.hideAlert = function(){
  document.getElementById("alertOverlay").style.display = "none";
};
</script>

</body>
</html>
