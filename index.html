<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nederbeek â€” Meldkamer (Politie & Kerst Editie)</title>

<style>
/* ============================================
   POLITIE + KERST THEMA
============================================ */
:root{
  --bg: #001528;
  --card: rgba(0,30,60,0.85);
  --muted:#c8d9eb;
  --accent:#ffd400;
  --white:#ffffff;

  --xmas-red: #d62828;
  --xmas-green: #5fa65c;
  --xmas-gold: #ffcf63;

  --police-blue: #0047ab;
}

body{
  margin:0;
  font-family:Inter,Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top, #012a4a, #000814);
  color:white;
  overflow-x:hidden;
}

/* sneeuw */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:url('https://i.imgur.com/pxyG7Z8.png');
  opacity:0.15;
  animation: snowfall 18s linear infinite;
}
@keyframes snowfall{
  0%{background-position:0 -1000px;}
  100%{background-position:0 1000px;}
}

/* kerstlichtjes */
body::after{
  content:"";
  position:fixed;
  top:0;left:0;
  width:100%;height:50px;
  background:url('https://i.imgur.com/tx8KXGI.png') repeat-x;
  background-size:contain;
  pointer-events:none;
  filter:drop-shadow(0 0 8px var(--xmas-gold));
}

.container{max-width:1200px;margin:20px auto;padding:18px}

.card{
  background:var(--card);
  padding:16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.15);
  box-shadow:0 6px 20px rgba(0,0,0,0.6),
              0 0 15px rgba(0,80,200,0.4);
  backdrop-filter: blur(6px);
}

.grid{
  display:grid;
  grid-template-columns:1fr 380px;
  gap:20px;
}
@media(max-width:980px){ .grid{grid-template-columns:1fr;} }

h2{margin-top:0;text-shadow:0 0 8px var(--police-blue);}

/* input */
input,select,textarea{
  width:100%;
  padding:10px;
  border-radius:8px;
  margin-bottom:12px;
  border:1px solid rgba(255,255,255,0.15);
  background:rgba(255,255,255,0.05);
  color:var(--white);
}

/* knoppen */
.btn{
  background:var(--accent);
  color:#001b35;
  padding:10px 14px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:700;
  box-shadow:0 0 10px var(--xmas-gold);
  transition:0.2s;
}
.btn:hover{ transform:scale(1.05); }

.btn.ghost{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.2);
  color:white;
  box-shadow:none;
}

/* noodknop */
.huge.nood{
  background:linear-gradient(90deg,#d62828,#0047ab,#d62828);
  background-size:300% 100%;
  animation: siren 1s infinite linear;
  border:none;
  color:white;
  font-size:20px;
  padding:16px;
  border-radius:14px;
  box-shadow:0 0 20px red, 0 0 20px blue;
  margin-top:10px;
}
@keyframes siren{
  0%{background-position:0%}
  100%{background-position:100%}
}

/* tabel */
.table{width:100%;border-collapse:collapse}
.table th,.table td{
  padding:10px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}

.thumb{width:80px;height:60px;object-fit:cover;border-radius:6px;}

/* OVD */
.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(255,255,255,0.05);
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
  border:1px solid rgba(255,255,255,0.1);
}
.status-badge{
  padding:8px 12px;
  border-radius:8px;
  font-weight:700;
}

/* nood alarm overlay */
#alertOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(120,0,0,0.92);
  color:white;
  z-index:999999;
  cursor:pointer;
  animation:pulse 1s infinite;
}
@keyframes pulse{
  0%{opacity:1;}50%{opacity:0.4;}100%{opacity:1;}
}
#alertOverlay h2{
  font-size:50px;
  text-shadow:0 0 15px red;
}

.footer{
  text-align:center;
  color:var(--muted);
  margin-top:20px;
  padding:10px;
}
</style>

</head>
<body>

<div class="container">

  <div class="grid">

    <!-- LINKERZIJDE -->
    <div>

      <div class="card">
        <h2>Nieuw incident</h2>

        <label>Locatie</label>
        <input id="locInput" placeholder="Bijv: Kerkstraat 12" />

        <label>Type melding</label>
        <select id="typeInput">
          <option>Verkeersongeval</option>
          <option>Vechtpartij</option>
          <option>Brand</option>
          <option>Diefstal</option>
          <option>Overval</option>
          <option>Verdachte situatie</option>
          <option>Huiselijk geweld</option>
          <option>Reanimatie</option>
        </select>

        <label>Omschrijving</label>
        <textarea id="descInput" rows="3"></textarea>

        <label>Afbeelding (optioneel)</label>
        <input id="imgInput" type="file" accept="image/*" />

        <button class="btn" onclick="addIncident()">Toevoegen</button>
      </div>

      <!-- INCIDENTEN -->
      <div class="card" style="margin-top:20px">
        <h2>Alle incidenten</h2>
        <table class="table">
          <thead>
            <tr>
              <th>Tijd</th>
              <th>Locatie</th>
              <th>Type</th>
              <th>Foto</th>
              <th>Actie</th>
            </tr>
          </thead>
          <tbody id="incidentTable"></tbody>
        </table>
      </div>

    </div>

    <!-- RECHTERZIJDE -->
    <div class="card">
      <h2>Huidige officieren (OVD)</h2>
      <div id="ovdList"></div>

      <h3 style="margin-top:20px">Noodknop</h3>
      <button class="btn huge nood" onclick="triggerAlert()">NOODALARM</button>
    </div>

  </div>

  <div class="footer">
    Â© Meldkamer Nederbeek â€“ Politie Ã— Kerst Editie ðŸŽ„ðŸš”
  </div>

</div>

<!-- OVERLAY -->
<div id="alertOverlay" onclick="hideAlert()">
  <h2>NOODALARM ACTIEF</h2>
  <p>Tik om te sluiten</p>
</div>

<!-- FIREBASE SCRIPT -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getDatabase,
  ref,
  push,
  onValue,
  remove
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

/* -----------------------------------------
   VERVANG DIT DOOR JOUW EIGEN FIREBASE CONFIG
------------------------------------------ */
const firebaseConfig = {
  apiKey: "JOUW_API_KEY",
  authDomain: "JOUW_AUTH_DOMAIN",
  databaseURL: "JOUW_DATABASE_URL",
  projectId: "JOUW_PROJECT_ID",
  storageBucket: "JOUW_STORAGE",
  messagingSenderId: "JOUW_SENDER",
  appId: "JOUW_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const incRef = ref(db, "incidenten");
const ovdRef = ref(db, "ovd");

/* --- INCIDENT TOEVOEGEN --- */
async function addIncident() {
  const loc = locInput.value;
  const type = typeInput.value;
  const desc = descInput.value;
  const file = imgInput.files[0];

  if (!loc) return alert("Locatie verplicht");

  let foto = "";
  if (file) {
    foto = await new Promise(res=>{
      const r = new FileReader();
      r.onload=()=>res(r.result);
      r.readAsDataURL(file);
    });
  }

  push(incRef,{
    tijd:new Date().toLocaleTimeString(),
    locatie:loc,
    type:type,
    beschrijving:desc,
    foto:foto
  });

  locInput.value="";
  descInput.value="";
  imgInput.value="";
}

/* --- INCIDENTEN TONEN --- */
onValue(incRef,(snap)=>{
  incidentTable.innerHTML="";

  snap.forEach(d=>{
    const id=d.key;
    const x=d.val();

    incidentTable.innerHTML += `
      <tr>
        <td>${x.tijd}</td>
        <td>${x.locatie}</td>
        <td>${x.type}</td>
        <td>${x.foto ? `<img class='thumb' src='${x.foto}'/>` : "-"}</td>
        <td><button class="btn ghost" onclick="delIncident('${id}')">Verwijder</button></td>
      </tr>
    `;
  });
});

/* --- INCIDENT VERWIJDEREN --- */
window.delIncident = function(id){
  remove(ref(db,"incidenten/"+id));
}

/* --- OVD TONEN --- */
onValue(ovdRef,(snap)=>{
  ovdList.innerHTML="";

  snap.forEach(d=>{
    const x=d.val();

    ovdList.innerHTML += `
      <div class="row">
        <div>
          <strong>${x.naam}</strong><br>
          <small>${x.eenheid}</small>
        </div>
        <div class="status-badge" style="background:${x.status=='Beschikbaar' ? 'var(--xmas-green)' : 'var(--xmas-red)'}">
          ${x.status}
        </div>
      </div>
    `;
  });
});

/* --- NOODALARM --- */
window.triggerAlert = function(){
  alertOverlay.style.display="flex";
}
window.hideAlert = function(){
  alertOverlay.style.display="none";
}
</script>

</body>
</html>
